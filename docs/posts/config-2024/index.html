<!DOCTYPE html>
<html lang="en">
<html class="dark light">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    

    
    
    
    <title>
         Some configuration updates
        
    </title>

        
            <meta property="og:title" content="Some configuration updates" />
        
     

     
         
     

     
         
    

    
    
        <link rel="icon" type="image/png" href=&#x2F;icon&#x2F;favicon.ico />
    

    
    
        <link href=https://ypark.github.io/fonts.css rel="stylesheet" />
    

    
    

    
    
        <script src=https://ypark.github.io/js/codeblock.js></script>
    

    
    
        <script src=https://ypark.github.io/js/toc.js></script>
    
    
    
    

    

	<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.7/MathJax.js?config=TeX-MML-AM_CHTML"></script>

        <script type="text/javascript" id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js">
        </script>
        
            <script>
            MathJax = {
              tex: {
                  inlineMath: [['$', '$'], ['\\(', '\\)'], ['$$', '$$']]
              }
            };
            </script>
        

	<!-- <\!-- KaTeX CSS -\-> -->
	<!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.15.2/katex.min.css"> -->
	
	<!-- <\!-- KaTeX JS -\-> -->
	<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.15.2/katex.min.js"></script> -->
	
	<!-- <\!-- Optional: KaTeX Auto-render extension -\-> -->
	<!-- <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.15.2/contrib/auto-render.min.js"></script> -->
	
	<!-- <script> -->
	<!--   document.addEventListener("DOMContentLoaded", function() { -->
	<!--       renderMathInElement(document.body, { -->
	<!-- 	  delimiters: [ -->
	<!-- 	      {left: "$$", right: "$$", display: true}, -->
	<!-- 	      {left: "$", right: "$", display: false} -->
	<!-- 	  ] -->
	<!--       }); -->
	<!--   }); -->
	<!-- </script> -->

    

    
    <link rel="alternate" type="application/atom+xml" title="" href="https://ypark.github.io/atom.xml">


    
    
        <link rel="stylesheet" type="text/css" href=https://ypark.github.io/theme/light.css />
        <link id="darkModeStyle" rel="stylesheet" type="text/css" href="https://ypark.github.io/theme/dark.css" />
    

    <!-- Set the correct theme in the script -->
    <script src=https://ypark.github.io/js/themetoggle.js></script>
    
        <script>setTheme(getSavedTheme());</script>
    

    <link rel="stylesheet" type="text/css" media="screen" href=https://ypark.github.io/main.css />

    
</head>


<body>
    <div class="content">
        <header>
    <div class="main">
        <a href=https:&#x2F;&#x2F;ypark.github.io></a>

        <div class="socials">
            
            <a rel="me" href="https:&#x2F;&#x2F;github.com&#x2F;causalpathlab&#x2F;" class="social">
                <img alt=github src=https://ypark.github.io/social_icons/github.svg>
            </a>
            
        </div>
    </div>

    <nav>
        
        <a href=https://ypark.github.io style="margin-left: 0.5em">home</a>
        
        <a href=https://ypark.github.io/about style="margin-left: 0.5em">&#x2F;about</a>
        
        <a href=https://ypark.github.io/posts style="margin-left: 0.5em">&#x2F;posts</a>
        
        <a href=https://ypark.github.io/team style="margin-left: 0.5em">&#x2F;team</a>
        
        <a href=https://ypark.github.io/alumni style="margin-left: 0.5em">&#x2F;alumni</a>
        

        
        |<a id="dark-mode-toggle" onclick="toggleTheme(); event.preventDefault();" href="#">
            <img src=https://ypark.github.io/feather/sun.svg id="sun-icon" style="filter: invert(1);" alt="Light" />
            <img src=https://ypark.github.io/feather/moon.svg id="moon-icon" alt="Dark" />
        </a>

        <!-- Inititialize the theme toggle icons -->
        <script>updateItemToggleTheme()</script>
        
    </nav>
</header>


        
        
    
<main>
  <article>
    <div class="title">
      
      
<div class="page-header">
  Some configuration updates<span class="primary-color" style="font-size: 1.6em">.</span>
</div>


      <div class="meta">
        
        Posted on <time>2024-08-30</time>
        

        

        

        
        
        <span class="tags-label"> :: Tags:</span>
        <span class="tags">
          <a href="https://ypark.github.io/tags/config/" class="post-tag">config</a>, 
          
          <a href="https://ypark.github.io/tags/display/" class="post-tag">display</a>, 
          
          <a href="https://ypark.github.io/tags/ethernet/" class="post-tag">ethernet</a>, 
          
          <a href="https://ypark.github.io/tags/coding/" class="post-tag">coding</a>, 
          
          <a href="https://ypark.github.io/tags/emacs/" class="post-tag">emacs</a>
          
        </span>
        

        
        
        
        
        
        

        
        

        

      </div>
    </div>

    

    
    
    
    <div class="toc-container">
      <h1 class="toc-title">Table of Contents</h1>
      <ul class="toc-list">
        
        <li>
          <a href="https://ypark.github.io/posts/config-2024/#emacs-for-rust-with-rustic-and-lsp">Emacs for Rust with rustic and lsp</a>
          
        </li>
        
        <li>
          <a href="https://ypark.github.io/posts/config-2024/#fix-unstable-internet">Fix unstable Internet</a>
          
        </li>
        
        <li>
          <a href="https://ypark.github.io/posts/config-2024/#fix-display-issues">Fix display issues</a>
          
        </li>
        
      </ul>
    </div>
    
    

    <section class="body">
      <h3 id="emacs-for-rust-with-rustic-and-lsp"><a class="zola-anchor" href="#emacs-for-rust-with-rustic-and-lsp" aria-label="Anchor link for: emacs-for-rust-with-rustic-and-lsp">Emacs for Rust with <code>rustic</code> and <code>lsp</code></a></h3>
<p>Learning Rust is my personal goal for this year. It is very strict in type checking and memory ownership. So, I needed some help until I could fully grasp its key concepts and syntax. I use Emacs for almost everything, including coding. After an hour of searching, I think I found a pretty good setup (a part of <code>.emacs.d/init.el</code>):</p>
<pre data-lang="lisp" style="background-color:#fafafa;color:#61676c;" class="language-lisp "><code class="language-lisp" data-lang="lisp"><span style="font-style:italic;color:#abb0b6;">;; Ensure that rust-mode is installed
</span><span>(</span><span style="color:#f07171;">use-package</span><span> rust</span><span style="color:#ed9366;">-</span><span>mode
</span><span>  :ensure </span><span style="color:#ff8f40;">t
</span><span>  :config
</span><span>  </span><span style="font-style:italic;color:#abb0b6;">;; Set the key binding for rust-format-buffer
</span><span>  (define</span><span style="color:#ed9366;">-</span><span>key rust</span><span style="color:#ed9366;">-</span><span>mode</span><span style="color:#ed9366;">-</span><span style="color:#f07171;">map </span><span>(kbd </span><span style="color:#86b300;">&quot;C-c C-f&quot;</span><span>) </span><span style="color:#ff8f40;">#&#39;rust-format-buffer</span><span>))
</span><span>
</span><span>(</span><span style="color:#f07171;">use-package</span><span> lsp</span><span style="color:#ed9366;">-</span><span>mode
</span><span>  :init
</span><span>  (add</span><span style="color:#ed9366;">-</span><span>hook &#39;rust</span><span style="color:#ed9366;">-</span><span>mode</span><span style="color:#ed9366;">-</span><span>hook </span><span style="color:#ff8f40;">#&#39;lsp</span><span>)
</span><span>  :custom
</span><span>  (lsp</span><span style="color:#ed9366;">-</span><span>rust</span><span style="color:#ed9366;">-</span><span>server &#39;rust</span><span style="color:#ed9366;">-</span><span>analyzer))
</span><span>
</span><span>(</span><span style="color:#f07171;">use-package</span><span> rustic
</span><span>  :ensure
</span><span>  :bind (:</span><span style="color:#f07171;">map</span><span> rustic</span><span style="color:#ed9366;">-</span><span>mode</span><span style="color:#ed9366;">-</span><span style="color:#f07171;">map
</span><span>              (</span><span style="color:#86b300;">&quot;M-j&quot;</span><span> . lsp</span><span style="color:#ed9366;">-</span><span>ui</span><span style="color:#ed9366;">-</span><span>imenu)
</span><span>              (</span><span style="color:#86b300;">&quot;M-?&quot;</span><span> . lsp</span><span style="color:#ed9366;">-</span><span style="color:#f07171;">find</span><span style="color:#ed9366;">-</span><span>references)
</span><span>              (</span><span style="color:#86b300;">&quot;C-c C-c a&quot;</span><span> . lsp</span><span style="color:#ed9366;">-</span><span>execute</span><span style="color:#ed9366;">-</span><span>code</span><span style="color:#ed9366;">-</span><span>action)
</span><span>              (</span><span style="color:#86b300;">&quot;C-c C-c r&quot;</span><span> . lsp</span><span style="color:#ed9366;">-</span><span>rename)
</span><span>              (</span><span style="color:#86b300;">&quot;C-c C-c q&quot;</span><span> . lsp</span><span style="color:#ed9366;">-</span><span>workspace</span><span style="color:#ed9366;">-</span><span>restart)
</span><span>              (</span><span style="color:#86b300;">&quot;C-c C-c Q&quot;</span><span> . lsp</span><span style="color:#ed9366;">-</span><span>workspace</span><span style="color:#ed9366;">-</span><span>shutdown)
</span><span>              (</span><span style="color:#86b300;">&quot;C-c C-c s&quot;</span><span> . lsp</span><span style="color:#ed9366;">-</span><span>rust</span><span style="color:#ed9366;">-</span><span>analyzer</span><span style="color:#ed9366;">-</span><span>status))
</span><span>  :config
</span><span>  (add</span><span style="color:#ed9366;">-</span><span>hook &#39;rustic</span><span style="color:#ed9366;">-</span><span>mode</span><span style="color:#ed9366;">-</span><span>hook (</span><span style="color:#f07171;">lambda </span><span>() (flyspell</span><span style="color:#ed9366;">-</span><span>mode </span><span style="color:#ed9366;">-</span><span style="color:#ff8f40;">1</span><span>)))
</span><span>  )
</span><span>
</span><span style="font-style:italic;color:#abb0b6;">;; Stop reformatting every time on save
</span><span>(rust</span><span style="color:#ed9366;">-</span><span>disable</span><span style="color:#ed9366;">-</span><span style="color:#f07171;">format</span><span style="color:#ed9366;">-</span><span>on</span><span style="color:#ed9366;">-</span><span>save)
</span></code></pre>
<p>We can peek into documentation and <code>fn</code> and <code>struct</code> definitions.</p>
<pre data-lang="lisp" style="background-color:#fafafa;color:#61676c;" class="language-lisp "><code class="language-lisp" data-lang="lisp"><span>(</span><span style="color:#f07171;">setq</span><span> lsp</span><span style="color:#ed9366;">-</span><span>inlay</span><span style="color:#ed9366;">-</span><span>hint</span><span style="color:#ed9366;">-</span><span>enable </span><span style="color:#ff8f40;">t</span><span>)
</span><span>(</span><span style="color:#f07171;">setq</span><span> lsp</span><span style="color:#ed9366;">-</span><span>ui</span><span style="color:#ed9366;">-</span><span>peek</span><span style="color:#ed9366;">-</span><span>enable </span><span style="color:#ff8f40;">t</span><span>)
</span><span>(</span><span style="color:#f07171;">setq</span><span> lsp</span><span style="color:#ed9366;">-</span><span style="color:#f07171;">format</span><span style="color:#ed9366;">-</span><span>on</span><span style="color:#ed9366;">-</span><span>save </span><span style="color:#ff8f40;">nil</span><span>)
</span><span>(</span><span style="color:#f07171;">setq</span><span> rustic</span><span style="color:#ed9366;">-</span><span style="color:#f07171;">format</span><span style="color:#ed9366;">-</span><span>on</span><span style="color:#ed9366;">-</span><span>save </span><span style="color:#ff8f40;">nil</span><span>)
</span><span>(</span><span style="color:#f07171;">setq</span><span> rust</span><span style="color:#ed9366;">-</span><span style="color:#f07171;">format</span><span style="color:#ed9366;">-</span><span>on</span><span style="color:#ed9366;">-</span><span>save </span><span style="color:#ff8f40;">nil</span><span>)
</span><span>
</span><span>(</span><span style="color:#f07171;">setq</span><span> special</span><span style="color:#ed9366;">-</span><span>display</span><span style="color:#ed9366;">-</span><span>buffer</span><span style="color:#ed9366;">-</span><span>names
</span><span>      &#39;(</span><span style="color:#86b300;">&quot;*rustic-compilation*&quot;</span><span>))
</span><span>
</span><span>(</span><span style="color:#f07171;">setq</span><span> special</span><span style="color:#ed9366;">-</span><span>display</span><span style="color:#ed9366;">-</span><span>function
</span><span>      (</span><span style="color:#f07171;">lambda </span><span>(buffer &amp;optional args)
</span><span>        (</span><span style="color:#f07171;">split</span><span style="color:#ed9366;">-</span><span>window)
</span><span>        (switch</span><span style="color:#ed9366;">-</span><span style="color:#fa6e32;">to</span><span style="color:#ed9366;">-</span><span>buffer buffer)
</span><span>        (</span><span style="color:#f07171;">get</span><span style="color:#ed9366;">-</span><span>buffer</span><span style="color:#ed9366;">-</span><span>window buffer </span><span style="color:#ff8f40;">0</span><span>)))
</span><span>
</span><span>(</span><span style="color:#f07171;">use-package</span><span> company
</span><span>  :ensure
</span><span>  :custom
</span><span>  (company</span><span style="color:#ed9366;">-</span><span>idle</span><span style="color:#ed9366;">-</span><span>delay </span><span style="color:#ff8f40;">0.25</span><span>) </span><span style="font-style:italic;color:#abb0b6;">;; how long to wait until popup
</span><span>  </span><span style="font-style:italic;color:#abb0b6;">;; (company-begin-commands nil) ;; uncomment to disable popup
</span><span>  :bind
</span><span>  (:</span><span style="color:#f07171;">map</span><span> company</span><span style="color:#ed9366;">-</span><span>active</span><span style="color:#ed9366;">-</span><span style="color:#f07171;">map
</span><span>	(</span><span style="color:#86b300;">&quot;C-n&quot;</span><span>. company</span><span style="color:#ed9366;">-</span><span>select</span><span style="color:#ed9366;">-</span><span>next)
</span><span>	(</span><span style="color:#86b300;">&quot;C-p&quot;</span><span>. company</span><span style="color:#ed9366;">-</span><span>select</span><span style="color:#ed9366;">-</span><span style="color:#f07171;">previous</span><span>)
</span><span>	(</span><span style="color:#86b300;">&quot;M-&lt;&quot;</span><span>. company</span><span style="color:#ed9366;">-</span><span>select</span><span style="color:#ed9366;">-</span><span style="color:#f07171;">first</span><span>)
</span><span>	(</span><span style="color:#86b300;">&quot;M-&gt;&quot;</span><span>. company</span><span style="color:#ed9366;">-</span><span>select</span><span style="color:#ed9366;">-</span><span style="color:#f07171;">last</span><span>)))
</span><span>
</span><span>(</span><span style="color:#f07171;">use-package</span><span> yasnippet
</span><span>  :ensure
</span><span>  :config
</span><span>  (yas</span><span style="color:#ed9366;">-</span><span>reload</span><span style="color:#ed9366;">-</span><span>all)
</span><span>  (add</span><span style="color:#ed9366;">-</span><span>hook &#39;</span><span style="color:#fa6e32;">prog</span><span style="color:#ed9366;">-</span><span>mode</span><span style="color:#ed9366;">-</span><span>hook &#39;yas</span><span style="color:#ed9366;">-</span><span>minor</span><span style="color:#ed9366;">-</span><span>mode)
</span><span>  (add</span><span style="color:#ed9366;">-</span><span>hook &#39;text</span><span style="color:#ed9366;">-</span><span>mode</span><span style="color:#ed9366;">-</span><span>hook &#39;yas</span><span style="color:#ed9366;">-</span><span>minor</span><span style="color:#ed9366;">-</span><span>mode))
</span></code></pre>
<p>When we deal with multiple projects, unused and leftover workspace caused performance drawback. So, the following wrapper is pretty handy.</p>
<pre data-lang="lisp" style="background-color:#fafafa;color:#61676c;" class="language-lisp "><code class="language-lisp" data-lang="lisp"><span>(</span><span style="color:#fa6e32;">defun </span><span style="color:#f29718;">cleanup-lsp </span><span>()
</span><span>  </span><span style="color:#86b300;">&quot;Remove all the workspace folders from LSP&quot;
</span><span>  (interactive)
</span><span>  (</span><span style="color:#fa6e32;">let </span><span>((folders (lsp</span><span style="color:#ed9366;">-</span><span>session</span><span style="color:#ed9366;">-</span><span>folders (lsp</span><span style="color:#ed9366;">-</span><span>session))))
</span><span>    (</span><span style="color:#fa6e32;">while</span><span> folders
</span><span>      (lsp</span><span style="color:#ed9366;">-</span><span>workspace</span><span style="color:#ed9366;">-</span><span>folders</span><span style="color:#ed9366;">-</span><span style="color:#f07171;">remove </span><span>(</span><span style="color:#f07171;">car</span><span> folders))
</span><span>      (</span><span style="color:#f07171;">setq</span><span> folders (</span><span style="color:#f07171;">cdr</span><span> folders)))))
</span></code></pre>
<p>Overall, coding Rust is pretty fun, and working with <code>lsp</code>, <code>company</code>, <code>yasnippet</code> can certainly teach me my mistakes interactively. They are quite resource-heavy, but I will need "a tutor" for a while.</p>
<h3 id="fix-unstable-internet"><a class="zola-anchor" href="#fix-unstable-internet" aria-label="Anchor link for: fix-unstable-internet">Fix unstable Internet</a></h3>
<p>Working from home for a couple of weeks, I learned that my network is very unstable, especially with the ethernet connection! The problem was my internet service provider is not top-notch, so the download and upload speed shouldn't exceed 100mb/s, but my ethernet device kept on trying to find better speed but couldn't do it. I found a nice solution that the network speed can be simply capped by disabling <code>autoneg</code>:</p>
<pre data-lang="sh" style="background-color:#fafafa;color:#61676c;" class="language-sh "><code class="language-sh" data-lang="sh"><span style="color:#f29718;">sudo</span><span> lshw</span><span style="color:#ff8f40;"> -C</span><span> network
</span></code></pre>
<pre data-lang="sh" style="background-color:#fafafa;color:#61676c;" class="language-sh "><code class="language-sh" data-lang="sh"><span style="color:#f29718;">sudo</span><span> ethtool</span><span style="color:#ff8f40;"> --change </span><span>${eth} speed 100 autoneg off
</span></code></pre>
<h3 id="fix-display-issues"><a class="zola-anchor" href="#fix-display-issues" aria-label="Anchor link for: fix-display-issues">Fix display issues</a></h3>
<p>Amazon Prime Day got me a new monitor, which is spacious and bulky enough to force me to fold up my laptop screen on my small desk. But I found Ubuntu keeps on activating my laptop screen. I can exclusively switch on my HDMI screen with this command:</p>
<pre data-lang="sh" style="background-color:#fafafa;color:#61676c;" class="language-sh "><code class="language-sh" data-lang="sh"><span style="color:#f29718;">xrandr</span><span style="color:#ff8f40;"> --output</span><span> eDP-1</span><span style="color:#ff8f40;"> --off --output</span><span> HDMI-1</span><span style="color:#ff8f40;"> --primary --auto
</span></code></pre>

    </section>
  </article>
</main>



        

    </div>
</body>

</html>
